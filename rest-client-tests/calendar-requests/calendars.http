@baseUrl = https://localhost:7038

# Combined calendars happy-path (create -> verify -> update -> delete)
# This file uses the REST Client response variable `{{$response.body.id}}` to
# pass the created resource id into subsequent requests. If your client doesn't
# support response variables, uncomment and set `@calendarId` below and replace
# `{{$response.body.id}}` with `{{calendarId}}` where needed.
# @calendarId = 00000000-0000-0000-0000-000000000000

### Create calendar
# @name calendarId
POST {{baseUrl}}/api/calendars
Content-Type: application/json

{
  "name": "Integration Calendar",
  "description": "Created by REST Client chain",
  "color": "#00FF00",
  "owner": "integration-test",
  "visibility": "private"
}

### Get all calendars (verify created exists)
GET {{baseUrl}}/api/calendars

### Get created calendar by id
# Uses the id from the most recent response body: {{$response.body.id}}
GET {{baseUrl}}/api/calendars/{{calendarId.response.body.id}}

### Update calendar
PUT {{baseUrl}}/api/calendars/{{calendarId.response.body.id}}
Content-Type: application/json

{
  "name": "Updated Integration Calendar",
  "description": "Updated by REST Client chain",
  "color": "#0000FF",
  "owner": "integration-test",
  "visibility": "public"
}

### Get updated calendar
GET {{baseUrl}}/api/calendars/{{calendarId.response.body.id}}

### Get events for a calendar
# Replace {{calendarId}} with a real GUID
GET {{baseUrl}}/api/calendars/{{calendarId.response.body.id}}/events

### Get occurrences for a calendar (requires start and end query params)
# Replace start/end with RFC3339 datetimes
GET {{baseUrl}}/api/calendars/{{$response.body.id}}/occurrences?start=2026-02-01T00:00:00Z&end=2026-02-28T23:59:59Z

### Delete calendar
DELETE {{baseUrl}}/api/calendars/{{calendarId.response.body.id}}
